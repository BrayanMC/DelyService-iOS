
name: Example

on:
  push:
    branches: [ develop, feature/* ]
  pull_request:
    branches: [ master ]

jobs:
  build-and-test:
    runs-on: macos-latest

    steps:
    - uses: actions/checkout@v2

    - name: Select Xcode
      run: sudo xcode-select -switch /Applications/Xcode_12.app

    - name: Build
      run: xcodebuild clean build -workspace DelyService.xcworkspace -scheme "DelyService" -sdk iphonesimulator -destination "platform=iOS Simulator,name=iPhone 12" ONLY_ACTIVE_ARCH=NO CODE_SIGNING_REQUIRED=NO

# jobs:
#   build-and-test:
#     # Job name is Build project
#     name: Example
#     # This job runs on macOS
#     runs-on: macos-latest
#     strategy:
#         matrix:
#           destination: ['platform=iOS Simulator,OS=14.4,name=iPhone 12 Pro Max']
#     steps:
#       - name: Checkout
#         uses: actions/checkout@v2

#       - name: Select Xcode
#         run: sudo xcode-select -switch /Applications/Xcode_12.4.app

#       - name: Build
#         run: |
#           xcodebuild clean build -workspace DelyService.xcworkspace -scheme DelyService -destination "${destination}" CODE_SIGN_IDENTITY="" CODE_SIGNING_REQUIRED=NO ONLY_ACTIVE_ARCH=NO
#         env:
#           destination: ${{ matrix.destination }}

#       - name: Build and Test
#         run: |
#           xcodebuild clean test -project DelyService.xcodeproj -scheme QA -destination "${destination}" CODE_SIGN_IDENTITY="" CODE_SIGNING_REQUIRED=NO ONLY_ACTIVE_ARCH=NO
#         env: 
#           destination: ${{ matrix.destination }}